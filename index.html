timestamp: now.getTime() - 1000 * 60 * 18
                                },
                                {
                                    title: "메시, 인터 마이애미와 2026년까지 장기 계약 연장 성사",
                                    summary: "리오넬 메시가 인터 마이애미와 2026년까지 계약을 연장하기로 합의했다고 구단이 공식 발표하며, MLS 리그의 위상 상승에 기여할 것으로 기대된다.",
                                    link: "https://example.com/sports3",
                                    source: "Associated Press",
                                    time: toKoreanTime(new Date(now.getTime() - 1000 * 60 * 20)),
                                    category: "sports",
                                    timestamp: now.getTime() - 1000 * 60 * 20
                                }
            ];
        }
        
        // 모든 뉴스 소스에서 데이터 로드 (메인 로직)
        async function loadAllNews() {
            document.getElementById('status-text').textContent = '뉴스 로딩 중...';
            document.getElementById('spinner').classList.remove('hidden');
            
            newsData = { politics: [], economy: [], sports: [] };
            
            const promises = newsSources.map(async (source) => {
                console.log(`[${source.name}] 뉴스 가져오는 중...`);
                const xml = await fetchRSSFeed(source.url);
                if (xml) {
                    const parsedNews = parseRSSFeed(xml, source.name);
                    parsedNews.forEach(news => {
                        if (news.category) {
                            newsData[news.category].push(news);
                        }
                    });
                }
            });
            
            await Promise.all(promises);
            
            // 각 카테고리별로 최신순 정렬
            for (const category in newsData) {
                newsData[category].sort((a, b) => b.timestamp - a.timestamp);
            }
            
            lastUpdateTime = new Date();
            renderNews();
            
            document.getElementById('status-text').textContent = '최신 뉴스 준비 완료';
            document.getElementById('spinner').classList.add('hidden');
            document.getElementById('last-update').textContent = `마지막 업데이트: ${getKoreanNow()}`;
        }

        // 초기 로딩 및 자동 갱신 설정
        document.addEventListener('DOMContentLoaded', () => {
            // 처음에는 샘플 데이터를 보여주고, 실제 데이터 로딩 시작
            newsData.politics = generateSampleNews().filter(n => n.category === 'politics');
            newsData.economy = generateSampleNews().filter(n => n.category === 'economy');
            newsData.sports = generateSampleNews().filter(n => n.category === 'sports');
            renderNews();

            // 실제 뉴스 데이터 로드 시작
            loadAllNews();

            // 10분마다 자동 갱신
            autoRefreshInterval = setInterval(loadAllNews, 10 * 60 * 1000);
        });
    </script>
</body>
</html>